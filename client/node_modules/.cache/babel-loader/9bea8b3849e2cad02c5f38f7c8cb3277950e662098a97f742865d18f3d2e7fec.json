{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\pedro\\\\Desktop\\\\NFTradeMarketPlace\\\\client\\\\src\\\\pages\\\\NFTs\\\\Catalog.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Box, Typography, CircularProgress, Card, CardMedia, CardContent, FormControl, InputLabel, Select, MenuItem, Slider, Button, IconButton, Dialog, DialogActions, DialogContent, DialogTitle, Divider } from \"@mui/material\";\nimport FavoriteIcon from \"@mui/icons-material/Favorite\";\nimport FavoriteBorderIcon from \"@mui/icons-material/FavoriteBorder\";\nimport ShoppingCartIcon from \"@mui/icons-material/ShoppingCart\";\nimport NFToken from \"../../images/NFToken.png\";\nimport { debounce } from \"lodash\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Catalog = () => {\n  _s();\n  const [nfts, setNfts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filters, setFilters] = useState({\n    minPrice: 0,\n    maxPrice: 100,\n    minRoyalty: 0,\n    maxRoyalty: 20,\n    sort: \"\"\n  });\n  const [likedNfts, setLikedNfts] = useState([]);\n  const [openDialog, setOpenDialog] = useState(false);\n  const [selectedNft, setSelectedNft] = useState(null);\n  useEffect(() => {\n    const fetchNFTs = async () => {\n      const {\n        minPrice,\n        maxPrice,\n        minRoyalty,\n        maxRoyalty,\n        sort\n      } = filters;\n      const params = new URLSearchParams({\n        minPrice,\n        maxPrice,\n        minRoyalty,\n        maxRoyalty,\n        sort\n      });\n      try {\n        const res = await fetch(`${process.env.REACT_APP_BACKEND_BASEURL}/nft?${params}`);\n        const data = await res.json();\n        if (data.success) {\n          setNfts(Array.isArray(data.data) ? data.data : []);\n        }\n      } catch (error) {\n        console.error(\"Error fetching NFTs:\", error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchNFTs();\n  }, [filters]);\n  useEffect(() => {\n    const fetchFavorites = async () => {\n      try {\n        const res = await fetch(`${process.env.REACT_APP_BACKEND_BASEURL}/user/favorites`, {\n          method: \"GET\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          credentials: \"include\"\n        });\n        const data = await res.json();\n        if (data.success) {\n          setLikedNfts(data.favorites.map(fav => fav._id));\n        }\n      } catch (error) {\n        console.error(\"Error fetching favorites:\", error);\n      }\n    };\n    fetchFavorites();\n  }, []);\n  const debouncedHandleFilterChange = debounce(e => {\n    setFilters(prev => ({\n      ...prev,\n      [e.target.name]: e.target.value\n    }));\n  }, 500);\n  const handleFilterChange = e => {\n    debouncedHandleFilterChange(e);\n  };\n  const handleLike = async nftId => {\n    try {\n      let res;\n      if (likedNfts.includes(nftId)) {\n        res = await fetch(`${process.env.REACT_APP_BACKEND_BASEURL}/nft/favorite/${nftId}`, {\n          method: \"DELETE\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          credentials: \"include\"\n        });\n      } else {\n        res = await fetch(`${process.env.REACT_APP_BACKEND_BASEURL}/nft/favorite/${nftId}`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          credentials: \"include\"\n        });\n      }\n      const data = await res.json();\n      if (data.success) {\n        if (likedNfts.includes(nftId)) {\n          setLikedNfts(prev => prev.filter(id => id !== nftId));\n          toast.success(\"NFT removed from favorites!\");\n        } else {\n          setLikedNfts(prev => [...prev, nftId]);\n          toast.success(\"NFT added to favorites!\");\n        }\n      } else {\n        toast.error(data.message);\n      }\n    } catch (error) {\n      console.error(\"Error toggling like on NFT:\", error);\n      toast.error(\"Error updating favorite status.\");\n    }\n  };\n  const handleBuyClick = nft => {\n    setSelectedNft(nft);\n    setOpenDialog(true);\n  };\n  const handleCancel = () => {\n    setOpenDialog(false);\n    setSelectedNft(null);\n  };\n  const handleBuy = async () => {\n    try {\n      const res = await fetch(`http://localhost:5000/nft/buy/${selectedNft._id}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        credentials: \"include\"\n      });\n      const data = await res.json();\n      if (data.success) {\n        toast.success(\"NFT purchased successfully!\");\n        setNfts(prev => prev.map(nft => nft._id === selectedNft._id ? {\n          ...nft,\n          owner: {\n            fullname: \"You\"\n          }\n        } : nft));\n        setNfts(prev => prev.filter(nft => nft._id !== selectedNft._id));\n      } else {\n        toast.error(data.message);\n      }\n    } catch (error) {\n      console.error(\"Error buying NFT:\", error);\n      toast.error(\"Error purchasing NFT.\");\n    } finally {\n      setOpenDialog(false);\n      setSelectedNft(null);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      p: 3\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      children: \"Catalog\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        mt: 3,\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(FormControl, {\n        sx: {\n          width: 200\n        },\n        children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n          children: \"Sort By\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Select, {\n          name: \"sort\",\n          value: filters.sort,\n          onChange: handleFilterChange,\n          label: \"Sort By\",\n          children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"\",\n            children: \"None\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"price_asc\",\n            children: \"Price: Low to High\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"price_desc\",\n            children: \"Price: High to Low\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"likes_asc\",\n            children: \"Likes: Low to High\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"likes_desc\",\n            children: \"Likes: High to Low\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"date_asc\",\n            children: \"Date: Old to New\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"date_desc\",\n            children: \"Date: New to Old\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"name_asc\",\n            children: \"Name: A to Z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"name_desc\",\n            children: \"Name: Z to A\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"royalty_asc\",\n            children: \"Royalty: Low to High\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(MenuItem, {\n            value: \"royalty_desc\",\n            children: \"Royalty: High to Low\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: \"flex\",\n          gap: 5\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            children: \"Price Range\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Slider, {\n            value: [filters.minPrice, filters.maxPrice],\n            onChange: (_, newValue) => setFilters(prev => ({\n              ...prev,\n              minPrice: newValue[0],\n              maxPrice: newValue[1]\n            })),\n            valueLabelDisplay: \"auto\",\n            valueLabelFormat: value => `${value.toFixed(2)} NFTokens`,\n            min: 0,\n            max: 100,\n            step: 0.01\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"subtitle1\",\n            children: \"Royalty Range\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Slider, {\n            value: [filters.minRoyalty, filters.maxRoyalty],\n            onChange: (_, newValue) => setFilters(prev => ({\n              ...prev,\n              minRoyalty: newValue[0],\n              maxRoyalty: newValue[1]\n            })),\n            valueLabelDisplay: \"auto\",\n            valueLabelFormat: value => `${value}%`,\n            min: 0,\n            max: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n      sx: {\n        mt: 3\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, this) : nfts.length > 0 ? /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: \"grid\",\n        gridTemplateColumns: \"repeat(auto-fill, minmax(250px, 1fr))\",\n        gap: 3,\n        mt: 3\n      },\n      children: nfts.map(nft => {\n        var _nft$owner, _nft$creator;\n        return /*#__PURE__*/_jsxDEV(Card, {\n          sx: {\n            border: \"1px solid #ccc\",\n            borderRadius: \"8px\",\n            transition: \"transform 0.3s ease\",\n            \"&:hover\": {\n              transform: \"scale(1.05)\"\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(CardMedia, {\n            component: \"img\",\n            height: \"300\",\n            image: nft.image,\n            alt: nft.NFTName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              sx: {\n                fontWeight: \"bold\"\n              },\n              children: nft.NFTName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              children: nft.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              fontWeight: \"bold\",\n              sx: {\n                display: \"flex\",\n                alignItems: \"center\"\n              },\n              children: [nft.price, /*#__PURE__*/_jsxDEV(\"img\", {\n                src: NFToken,\n                alt: \"NFToken\",\n                style: {\n                  width: 35,\n                  height: 35\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 297,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: [\"Owner: \", (_nft$owner = nft.owner) === null || _nft$owner === void 0 ? void 0 : _nft$owner.fullname]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: [\"Creator: \", (_nft$creator = nft.creator) === null || _nft$creator === void 0 ? void 0 : _nft$creator.fullname]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 306,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: [\"Royalty: \", nft.royalty, \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                mt: 2,\n                display: \"flex\",\n                justifyContent: \"space-between\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                onClick: () => handleLike(nft._id),\n                sx: {\n                  color: likedNfts.includes(nft._id) ? \"red\" : \"gray\"\n                },\n                children: likedNfts.includes(nft._id) ? /*#__PURE__*/_jsxDEV(FavoriteIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 325,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(FavoriteBorderIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                onClick: () => handleBuyClick(nft),\n                variant: \"outlined\",\n                color: \"primary\",\n                startIcon: /*#__PURE__*/_jsxDEV(ShoppingCartIcon, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 32\n                }, this),\n                children: \"Buy\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 15\n          }, this)]\n        }, nft._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n      sx: {\n        mt: 3\n      },\n      children: \"No NFTs found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: openDialog,\n      onClose: handleCancel,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        children: \"Buy NFT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: \"flex\",\n            gap: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: selectedNft === null || selectedNft === void 0 ? void 0 : selectedNft.image,\n            alt: selectedNft === null || selectedNft === void 0 ? void 0 : selectedNft.NFTName,\n            style: {\n              width: \"200px\",\n              height: \"200px\",\n              objectFit: \"cover\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: selectedNft === null || selectedNft === void 0 ? void 0 : selectedNft.NFTName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: selectedNft === null || selectedNft === void 0 ? void 0 : selectedNft.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Divider, {\n              sx: {\n                my: 1\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body1\",\n              sx: {\n                display: \"flex\",\n                alignItems: \"center\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                children: \"Price:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 366,\n                columnNumber: 17\n              }, this), \" \", selectedNft === null || selectedNft === void 0 ? void 0 : selectedNft.price, \" \", /*#__PURE__*/_jsxDEV(\"img\", {\n                src: NFToken,\n                alt: \"NFToken\",\n                style: {\n                  width: 30,\n                  height: 30\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 362,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleCancel,\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: handleBuy,\n          color: \"primary\",\n          children: \"Buy\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 376,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 191,\n    columnNumber: 5\n  }, this);\n};\n_s(Catalog, \"r0M1gQYGl54nzQJqlNVAI1IkpRg=\");\n_c = Catalog;\nexport default Catalog;\nvar _c;\n$RefreshReg$(_c, \"Catalog\");","map":{"version":3,"names":["React","useState","useEffect","Box","Typography","CircularProgress","Card","CardMedia","CardContent","FormControl","InputLabel","Select","MenuItem","Slider","Button","IconButton","Dialog","DialogActions","DialogContent","DialogTitle","Divider","FavoriteIcon","FavoriteBorderIcon","ShoppingCartIcon","NFToken","debounce","toast","jsxDEV","_jsxDEV","Catalog","_s","nfts","setNfts","loading","setLoading","filters","setFilters","minPrice","maxPrice","minRoyalty","maxRoyalty","sort","likedNfts","setLikedNfts","openDialog","setOpenDialog","selectedNft","setSelectedNft","fetchNFTs","params","URLSearchParams","res","fetch","process","env","REACT_APP_BACKEND_BASEURL","data","json","success","Array","isArray","error","console","fetchFavorites","method","headers","credentials","favorites","map","fav","_id","debouncedHandleFilterChange","e","prev","target","name","value","handleFilterChange","handleLike","nftId","includes","filter","id","message","handleBuyClick","nft","handleCancel","handleBuy","owner","fullname","sx","p","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","mt","display","justifyContent","width","onChange","label","gap","_","newValue","valueLabelDisplay","valueLabelFormat","toFixed","min","max","step","length","gridTemplateColumns","_nft$owner","_nft$creator","border","borderRadius","transition","transform","component","height","image","alt","NFTName","fontWeight","color","description","alignItems","price","src","style","creator","royalty","onClick","startIcon","open","onClose","objectFit","my","_c","$RefreshReg$"],"sources":["C:/Users/pedro/Desktop/NFTradeMarketPlace/client/src/pages/NFTs/Catalog.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  Box,\r\n  Typography,\r\n  CircularProgress,\r\n  Card,\r\n  CardMedia,\r\n  CardContent,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Slider,\r\n  Button,\r\n  IconButton,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  Divider,\r\n} from \"@mui/material\";\r\nimport FavoriteIcon from \"@mui/icons-material/Favorite\";\r\nimport FavoriteBorderIcon from \"@mui/icons-material/FavoriteBorder\";\r\nimport ShoppingCartIcon from \"@mui/icons-material/ShoppingCart\";\r\nimport NFToken from \"../../images/NFToken.png\";\r\nimport { debounce } from \"lodash\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Catalog = () => {\r\n  const [nfts, setNfts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({\r\n    minPrice: 0,\r\n    maxPrice: 100,\r\n    minRoyalty: 0,\r\n    maxRoyalty: 20,\r\n    sort: \"\",\r\n  });\r\n  const [likedNfts, setLikedNfts] = useState([]);\r\n  const [openDialog, setOpenDialog] = useState(false);\r\n  const [selectedNft, setSelectedNft] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchNFTs = async () => {\r\n      const { minPrice, maxPrice, minRoyalty, maxRoyalty, sort } = filters;\r\n      const params = new URLSearchParams({\r\n        minPrice,\r\n        maxPrice,\r\n        minRoyalty,\r\n        maxRoyalty,\r\n        sort,\r\n      });\r\n\r\n      try {\r\n        const res = await fetch(`${process.env.REACT_APP_BACKEND_BASEURL}/nft?${params}`);\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          setNfts(Array.isArray(data.data) ? data.data : []);\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching NFTs:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchNFTs();\r\n  }, [filters]);\r\n\r\n  useEffect(() => {\r\n    const fetchFavorites = async () => {\r\n      try {\r\n        const res = await fetch(`${process.env.REACT_APP_BACKEND_BASEURL}/user/favorites`, {\r\n          method: \"GET\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          credentials: \"include\",\r\n        });\r\n        const data = await res.json();\r\n        if (data.success) {\r\n          setLikedNfts(data.favorites.map((fav) => fav._id));\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching favorites:\", error);\r\n      }\r\n    };\r\n\r\n    fetchFavorites();\r\n  }, []);\r\n\r\n  const debouncedHandleFilterChange = debounce((e) => {\r\n    setFilters((prev) => ({\r\n      ...prev,\r\n      [e.target.name]: e.target.value,\r\n    }));\r\n  }, 500);\r\n\r\n  const handleFilterChange = (e) => {\r\n    debouncedHandleFilterChange(e);\r\n  };\r\n\r\n  const handleLike = async (nftId) => {\r\n    try {\r\n      let res;\r\n      if (likedNfts.includes(nftId)) {\r\n        res = await fetch(`${process.env.REACT_APP_BACKEND_BASEURL}/nft/favorite/${nftId}`, {\r\n          method: \"DELETE\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          credentials: \"include\",\r\n        });\r\n      } else {\r\n        res = await fetch(`${process.env.REACT_APP_BACKEND_BASEURL}/nft/favorite/${nftId}`, {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          credentials: \"include\",\r\n        });\r\n      }\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        if (likedNfts.includes(nftId)) {\r\n          setLikedNfts((prev) => prev.filter((id) => id !== nftId));\r\n          toast.success(\"NFT removed from favorites!\");\r\n        } else {\r\n          setLikedNfts((prev) => [...prev, nftId]);\r\n          toast.success(\"NFT added to favorites!\");\r\n        }\r\n      } else {\r\n        toast.error(data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error toggling like on NFT:\", error);\r\n      toast.error(\"Error updating favorite status.\");\r\n    }\r\n  };\r\n\r\n  const handleBuyClick = (nft) => {\r\n    setSelectedNft(nft);\r\n    setOpenDialog(true);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setOpenDialog(false);\r\n    setSelectedNft(null);\r\n  };\r\n\r\n  const handleBuy = async () => {\r\n    try {\r\n      const res = await fetch(\r\n        `http://localhost:5000/nft/buy/${selectedNft._id}`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          credentials: \"include\",\r\n        }\r\n      );\r\n\r\n      const data = await res.json();\r\n\r\n      if (data.success) {\r\n        toast.success(\"NFT purchased successfully!\");\r\n        setNfts((prev) =>\r\n          prev.map((nft) =>\r\n            nft._id === selectedNft._id\r\n              ? { ...nft, owner: { fullname: \"You\" } }\r\n              : nft\r\n          )\r\n        );\r\n        setNfts((prev) => prev.filter((nft) => nft._id !== selectedNft._id));\r\n      } else {\r\n        toast.error(data.message);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error buying NFT:\", error);\r\n      toast.error(\"Error purchasing NFT.\");\r\n    } finally {\r\n      setOpenDialog(false);\r\n      setSelectedNft(null);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      <Typography variant=\"h4\">Catalog</Typography>\r\n\r\n      <Box sx={{ mt: 3, display: \"flex\", justifyContent: \"space-between\" }}>\r\n        <FormControl sx={{ width: 200 }}>\r\n          <InputLabel>Sort By</InputLabel>\r\n          <Select\r\n            name=\"sort\"\r\n            value={filters.sort}\r\n            onChange={handleFilterChange}\r\n            label=\"Sort By\"\r\n          >\r\n            <MenuItem value=\"\">None</MenuItem>\r\n            <MenuItem value=\"price_asc\">Price: Low to High</MenuItem>\r\n            <MenuItem value=\"price_desc\">Price: High to Low</MenuItem>\r\n            <MenuItem value=\"likes_asc\">Likes: Low to High</MenuItem>\r\n            <MenuItem value=\"likes_desc\">Likes: High to Low</MenuItem>\r\n            <MenuItem value=\"date_asc\">Date: Old to New</MenuItem>\r\n            <MenuItem value=\"date_desc\">Date: New to Old</MenuItem>\r\n            <MenuItem value=\"name_asc\">Name: A to Z</MenuItem>\r\n            <MenuItem value=\"name_desc\">Name: Z to A</MenuItem>\r\n            <MenuItem value=\"royalty_asc\">Royalty: Low to High</MenuItem>\r\n            <MenuItem value=\"royalty_desc\">Royalty: High to Low</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n\r\n        <Box sx={{ display: \"flex\", gap: 5 }}>\r\n          <Box>\r\n            <Typography variant=\"subtitle1\">Price Range</Typography>\r\n            <Slider\r\n              value={[filters.minPrice, filters.maxPrice]}\r\n              onChange={(_, newValue) =>\r\n                setFilters((prev) => ({\r\n                  ...prev,\r\n                  minPrice: newValue[0],\r\n                  maxPrice: newValue[1],\r\n                }))\r\n              }\r\n              valueLabelDisplay=\"auto\"\r\n              valueLabelFormat={(value) => `${value.toFixed(2)} NFTokens`}\r\n              min={0}\r\n              max={100}\r\n              step={0.01}\r\n            />\r\n          </Box>\r\n\r\n          <Box>\r\n            <Typography variant=\"subtitle1\">Royalty Range</Typography>\r\n            <Slider\r\n              value={[filters.minRoyalty, filters.maxRoyalty]}\r\n              onChange={(_, newValue) =>\r\n                setFilters((prev) => ({\r\n                  ...prev,\r\n                  minRoyalty: newValue[0],\r\n                  maxRoyalty: newValue[1],\r\n                }))\r\n              }\r\n              valueLabelDisplay=\"auto\"\r\n              valueLabelFormat={(value) => `${value}%`}\r\n              min={0}\r\n              max={20}\r\n            />\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n\r\n      {loading ? (\r\n        <CircularProgress sx={{ mt: 3 }} />\r\n      ) : nfts.length > 0 ? (\r\n        <Box\r\n          sx={{\r\n            display: \"grid\",\r\n            gridTemplateColumns: \"repeat(auto-fill, minmax(250px, 1fr))\",\r\n            gap: 3,\r\n            mt: 3,\r\n          }}\r\n        >\r\n          {nfts.map((nft) => (\r\n            <Card\r\n              key={nft._id}\r\n              sx={{\r\n                border: \"1px solid #ccc\",\r\n                borderRadius: \"8px\",\r\n                transition: \"transform 0.3s ease\",\r\n                \"&:hover\": { transform: \"scale(1.05)\" },\r\n              }}\r\n            >\r\n              <CardMedia\r\n                component=\"img\"\r\n                height=\"300\"\r\n                image={nft.image}\r\n                alt={nft.NFTName}\r\n              />\r\n              <CardContent>\r\n                <Typography variant=\"h6\" sx={{ fontWeight: \"bold\" }}>\r\n                  {nft.NFTName}\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                  {nft.description}\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"body1\"\r\n                  fontWeight=\"bold\"\r\n                  sx={{ display: \"flex\", alignItems: \"center\" }}\r\n                >\r\n                  {nft.price}\r\n                  <img\r\n                    src={NFToken}\r\n                    alt=\"NFToken\"\r\n                    style={{ width: 35, height: 35 }}\r\n                  />\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  Owner: {nft.owner?.fullname}\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  Creator: {nft.creator?.fullname}\r\n                </Typography>\r\n                <Typography variant=\"body2\">Royalty: {nft.royalty}%</Typography>\r\n\r\n                <Box\r\n                  sx={{\r\n                    mt: 2,\r\n                    display: \"flex\",\r\n                    justifyContent: \"space-between\",\r\n                  }}\r\n                >\r\n                  <IconButton\r\n                    onClick={() => handleLike(nft._id)}\r\n                    sx={{\r\n                      color: likedNfts.includes(nft._id) ? \"red\" : \"gray\",\r\n                    }}\r\n                  >\r\n                    {likedNfts.includes(nft._id) ? (\r\n                      <FavoriteIcon />\r\n                    ) : (\r\n                      <FavoriteBorderIcon />\r\n                    )}\r\n                  </IconButton>\r\n                  <Button\r\n                    onClick={() => handleBuyClick(nft)}\r\n                    variant=\"outlined\"\r\n                    color=\"primary\"\r\n                    startIcon={<ShoppingCartIcon />}\r\n                  >\r\n                    Buy\r\n                  </Button>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </Box>\r\n      ) : (\r\n        <Typography sx={{ mt: 3 }}>No NFTs found.</Typography>\r\n      )}\r\n\r\n      <Dialog open={openDialog} onClose={handleCancel}>\r\n        <DialogTitle>Buy NFT</DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ display: \"flex\", gap: 2 }}>\r\n            <img\r\n              src={selectedNft?.image}\r\n              alt={selectedNft?.NFTName}\r\n              style={{ width: \"200px\", height: \"200px\", objectFit: \"cover\" }}\r\n            />\r\n            <Box>\r\n              <Typography variant=\"h6\">{selectedNft?.NFTName}</Typography>\r\n              <Typography variant=\"body2\">\r\n                {selectedNft?.description}\r\n              </Typography>\r\n              <Divider sx={{ my: 1 }} />\r\n              <Typography\r\n                variant=\"body1\"\r\n                sx={{ display: \"flex\", alignItems: \"center\" }}\r\n              >\r\n                <strong>Price:</strong> {selectedNft?.price}{\" \"}\r\n                <img\r\n                  src={NFToken}\r\n                  alt=\"NFToken\"\r\n                  style={{ width: 30, height: 30 }}\r\n                />\r\n              </Typography>\r\n            </Box>\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCancel}>Cancel</Button>\r\n          <Button onClick={handleBuy} color=\"primary\">\r\n            Buy\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Catalog;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SACEC,GAAG,EACHC,UAAU,EACVC,gBAAgB,EAChBC,IAAI,EACJC,SAAS,EACTC,WAAW,EACXC,WAAW,EACXC,UAAU,EACVC,MAAM,EACNC,QAAQ,EACRC,MAAM,EACNC,MAAM,EACNC,UAAU,EACVC,MAAM,EACNC,aAAa,EACbC,aAAa,EACbC,WAAW,EACXC,OAAO,QACF,eAAe;AACtB,OAAOC,YAAY,MAAM,8BAA8B;AACvD,OAAOC,kBAAkB,MAAM,oCAAoC;AACnE,OAAOC,gBAAgB,MAAM,kCAAkC;AAC/D,OAAOC,OAAO,MAAM,0BAA0B;AAC9C,SAASC,QAAQ,QAAQ,QAAQ;AACjC,SAASC,KAAK,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvC,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACpB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EACpC,MAAM,CAACgC,OAAO,EAAEC,UAAU,CAAC,GAAGjC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACkC,OAAO,EAAEC,UAAU,CAAC,GAAGnC,QAAQ,CAAC;IACrCoC,QAAQ,EAAE,CAAC;IACXC,QAAQ,EAAE,GAAG;IACbC,UAAU,EAAE,CAAC;IACbC,UAAU,EAAE,EAAE;IACdC,IAAI,EAAE;EACR,CAAC,CAAC;EACF,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAG1C,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAAC2C,UAAU,EAAEC,aAAa,CAAC,GAAG5C,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAC6C,WAAW,EAAEC,cAAc,CAAC,GAAG9C,QAAQ,CAAC,IAAI,CAAC;EAEpDC,SAAS,CAAC,MAAM;IACd,MAAM8C,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,MAAM;QAAEX,QAAQ;QAAEC,QAAQ;QAAEC,UAAU;QAAEC,UAAU;QAAEC;MAAK,CAAC,GAAGN,OAAO;MACpE,MAAMc,MAAM,GAAG,IAAIC,eAAe,CAAC;QACjCb,QAAQ;QACRC,QAAQ;QACRC,UAAU;QACVC,UAAU;QACVC;MACF,CAAC,CAAC;MAEF,IAAI;QACF,MAAMU,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,yBAAyB,QAAQN,MAAM,EAAE,CAAC;QACjF,MAAMO,IAAI,GAAG,MAAML,GAAG,CAACM,IAAI,CAAC,CAAC;QAC7B,IAAID,IAAI,CAACE,OAAO,EAAE;UAChB1B,OAAO,CAAC2B,KAAK,CAACC,OAAO,CAACJ,IAAI,CAACA,IAAI,CAAC,GAAGA,IAAI,CAACA,IAAI,GAAG,EAAE,CAAC;QACpD;MACF,CAAC,CAAC,OAAOK,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;MAC9C,CAAC,SAAS;QACR3B,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDc,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,CAACb,OAAO,CAAC,CAAC;EAEbjC,SAAS,CAAC,MAAM;IACd,MAAM6D,cAAc,GAAG,MAAAA,CAAA,KAAY;MACjC,IAAI;QACF,MAAMZ,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,yBAAyB,iBAAiB,EAAE;UACjFS,MAAM,EAAE,KAAK;UACbC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,WAAW,EAAE;QACf,CAAC,CAAC;QACF,MAAMV,IAAI,GAAG,MAAML,GAAG,CAACM,IAAI,CAAC,CAAC;QAC7B,IAAID,IAAI,CAACE,OAAO,EAAE;UAChBf,YAAY,CAACa,IAAI,CAACW,SAAS,CAACC,GAAG,CAAEC,GAAG,IAAKA,GAAG,CAACC,GAAG,CAAC,CAAC;QACpD;MACF,CAAC,CAAC,OAAOT,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACnD;IACF,CAAC;IAEDE,cAAc,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMQ,2BAA2B,GAAG9C,QAAQ,CAAE+C,CAAC,IAAK;IAClDpC,UAAU,CAAEqC,IAAI,KAAM;MACpB,GAAGA,IAAI;MACP,CAACD,CAAC,CAACE,MAAM,CAACC,IAAI,GAAGH,CAAC,CAACE,MAAM,CAACE;IAC5B,CAAC,CAAC,CAAC;EACL,CAAC,EAAE,GAAG,CAAC;EAEP,MAAMC,kBAAkB,GAAIL,CAAC,IAAK;IAChCD,2BAA2B,CAACC,CAAC,CAAC;EAChC,CAAC;EAED,MAAMM,UAAU,GAAG,MAAOC,KAAK,IAAK;IAClC,IAAI;MACF,IAAI5B,GAAG;MACP,IAAIT,SAAS,CAACsC,QAAQ,CAACD,KAAK,CAAC,EAAE;QAC7B5B,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,yBAAyB,iBAAiBwB,KAAK,EAAE,EAAE;UAClFf,MAAM,EAAE,QAAQ;UAChBC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,WAAW,EAAE;QACf,CAAC,CAAC;MACJ,CAAC,MAAM;QACLf,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGC,OAAO,CAACC,GAAG,CAACC,yBAAyB,iBAAiBwB,KAAK,EAAE,EAAE;UAClFf,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACP,cAAc,EAAE;UAClB,CAAC;UACDC,WAAW,EAAE;QACf,CAAC,CAAC;MACJ;MAEA,MAAMV,IAAI,GAAG,MAAML,GAAG,CAACM,IAAI,CAAC,CAAC;MAE7B,IAAID,IAAI,CAACE,OAAO,EAAE;QAChB,IAAIhB,SAAS,CAACsC,QAAQ,CAACD,KAAK,CAAC,EAAE;UAC7BpC,YAAY,CAAE8B,IAAI,IAAKA,IAAI,CAACQ,MAAM,CAAEC,EAAE,IAAKA,EAAE,KAAKH,KAAK,CAAC,CAAC;UACzDrD,KAAK,CAACgC,OAAO,CAAC,6BAA6B,CAAC;QAC9C,CAAC,MAAM;UACLf,YAAY,CAAE8B,IAAI,IAAK,CAAC,GAAGA,IAAI,EAAEM,KAAK,CAAC,CAAC;UACxCrD,KAAK,CAACgC,OAAO,CAAC,yBAAyB,CAAC;QAC1C;MACF,CAAC,MAAM;QACLhC,KAAK,CAACmC,KAAK,CAACL,IAAI,CAAC2B,OAAO,CAAC;MAC3B;IACF,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;MACnDnC,KAAK,CAACmC,KAAK,CAAC,iCAAiC,CAAC;IAChD;EACF,CAAC;EAED,MAAMuB,cAAc,GAAIC,GAAG,IAAK;IAC9BtC,cAAc,CAACsC,GAAG,CAAC;IACnBxC,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,MAAMyC,YAAY,GAAGA,CAAA,KAAM;IACzBzC,aAAa,CAAC,KAAK,CAAC;IACpBE,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EAED,MAAMwC,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B,IAAI;MACF,MAAMpC,GAAG,GAAG,MAAMC,KAAK,CACrB,iCAAiCN,WAAW,CAACwB,GAAG,EAAE,EAClD;QACEN,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,WAAW,EAAE;MACf,CACF,CAAC;MAED,MAAMV,IAAI,GAAG,MAAML,GAAG,CAACM,IAAI,CAAC,CAAC;MAE7B,IAAID,IAAI,CAACE,OAAO,EAAE;QAChBhC,KAAK,CAACgC,OAAO,CAAC,6BAA6B,CAAC;QAC5C1B,OAAO,CAAEyC,IAAI,IACXA,IAAI,CAACL,GAAG,CAAEiB,GAAG,IACXA,GAAG,CAACf,GAAG,KAAKxB,WAAW,CAACwB,GAAG,GACvB;UAAE,GAAGe,GAAG;UAAEG,KAAK,EAAE;YAAEC,QAAQ,EAAE;UAAM;QAAE,CAAC,GACtCJ,GACN,CACF,CAAC;QACDrD,OAAO,CAAEyC,IAAI,IAAKA,IAAI,CAACQ,MAAM,CAAEI,GAAG,IAAKA,GAAG,CAACf,GAAG,KAAKxB,WAAW,CAACwB,GAAG,CAAC,CAAC;MACtE,CAAC,MAAM;QACL5C,KAAK,CAACmC,KAAK,CAACL,IAAI,CAAC2B,OAAO,CAAC;MAC3B;IACF,CAAC,CAAC,OAAOtB,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,mBAAmB,EAAEA,KAAK,CAAC;MACzCnC,KAAK,CAACmC,KAAK,CAAC,uBAAuB,CAAC;IACtC,CAAC,SAAS;MACRhB,aAAa,CAAC,KAAK,CAAC;MACpBE,cAAc,CAAC,IAAI,CAAC;IACtB;EACF,CAAC;EAED,oBACEnB,OAAA,CAACzB,GAAG;IAACuF,EAAE,EAAE;MAAEC,CAAC,EAAE;IAAE,CAAE;IAAAC,QAAA,gBAChBhE,OAAA,CAACxB,UAAU;MAACyF,OAAO,EAAC,IAAI;MAAAD,QAAA,EAAC;IAAO;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAY,CAAC,eAE7CrE,OAAA,CAACzB,GAAG;MAACuF,EAAE,EAAE;QAAEQ,EAAE,EAAE,CAAC;QAAEC,OAAO,EAAE,MAAM;QAAEC,cAAc,EAAE;MAAgB,CAAE;MAAAR,QAAA,gBACnEhE,OAAA,CAACnB,WAAW;QAACiF,EAAE,EAAE;UAAEW,KAAK,EAAE;QAAI,CAAE;QAAAT,QAAA,gBAC9BhE,OAAA,CAAClB,UAAU;UAAAkF,QAAA,EAAC;QAAO;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAY,CAAC,eAChCrE,OAAA,CAACjB,MAAM;UACLgE,IAAI,EAAC,MAAM;UACXC,KAAK,EAAEzC,OAAO,CAACM,IAAK;UACpB6D,QAAQ,EAAEzB,kBAAmB;UAC7B0B,KAAK,EAAC,SAAS;UAAAX,QAAA,gBAEfhE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,EAAE;YAAAgB,QAAA,EAAC;UAAI;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eAClCrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,WAAW;YAAAgB,QAAA,EAAC;UAAkB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eACzDrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,YAAY;YAAAgB,QAAA,EAAC;UAAkB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eAC1DrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,WAAW;YAAAgB,QAAA,EAAC;UAAkB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eACzDrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,YAAY;YAAAgB,QAAA,EAAC;UAAkB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eAC1DrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,UAAU;YAAAgB,QAAA,EAAC;UAAgB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eACtDrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,WAAW;YAAAgB,QAAA,EAAC;UAAgB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eACvDrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,UAAU;YAAAgB,QAAA,EAAC;UAAY;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eAClDrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,WAAW;YAAAgB,QAAA,EAAC;UAAY;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eACnDrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,aAAa;YAAAgB,QAAA,EAAC;UAAoB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC,eAC7DrE,OAAA,CAAChB,QAAQ;YAACgE,KAAK,EAAC,cAAc;YAAAgB,QAAA,EAAC;UAAoB;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAU,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,eAEdrE,OAAA,CAACzB,GAAG;QAACuF,EAAE,EAAE;UAAES,OAAO,EAAE,MAAM;UAAEK,GAAG,EAAE;QAAE,CAAE;QAAAZ,QAAA,gBACnChE,OAAA,CAACzB,GAAG;UAAAyF,QAAA,gBACFhE,OAAA,CAACxB,UAAU;YAACyF,OAAO,EAAC,WAAW;YAAAD,QAAA,EAAC;UAAW;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eACxDrE,OAAA,CAACf,MAAM;YACL+D,KAAK,EAAE,CAACzC,OAAO,CAACE,QAAQ,EAAEF,OAAO,CAACG,QAAQ,CAAE;YAC5CgE,QAAQ,EAAEA,CAACG,CAAC,EAAEC,QAAQ,KACpBtE,UAAU,CAAEqC,IAAI,KAAM;cACpB,GAAGA,IAAI;cACPpC,QAAQ,EAAEqE,QAAQ,CAAC,CAAC,CAAC;cACrBpE,QAAQ,EAAEoE,QAAQ,CAAC,CAAC;YACtB,CAAC,CAAC,CACH;YACDC,iBAAiB,EAAC,MAAM;YACxBC,gBAAgB,EAAGhC,KAAK,IAAK,GAAGA,KAAK,CAACiC,OAAO,CAAC,CAAC,CAAC,WAAY;YAC5DC,GAAG,EAAE,CAAE;YACPC,GAAG,EAAE,GAAI;YACTC,IAAI,EAAE;UAAK;YAAAlB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACZ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAENrE,OAAA,CAACzB,GAAG;UAAAyF,QAAA,gBACFhE,OAAA,CAACxB,UAAU;YAACyF,OAAO,EAAC,WAAW;YAAAD,QAAA,EAAC;UAAa;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAY,CAAC,eAC1DrE,OAAA,CAACf,MAAM;YACL+D,KAAK,EAAE,CAACzC,OAAO,CAACI,UAAU,EAAEJ,OAAO,CAACK,UAAU,CAAE;YAChD8D,QAAQ,EAAEA,CAACG,CAAC,EAAEC,QAAQ,KACpBtE,UAAU,CAAEqC,IAAI,KAAM;cACpB,GAAGA,IAAI;cACPlC,UAAU,EAAEmE,QAAQ,CAAC,CAAC,CAAC;cACvBlE,UAAU,EAAEkE,QAAQ,CAAC,CAAC;YACxB,CAAC,CAAC,CACH;YACDC,iBAAiB,EAAC,MAAM;YACxBC,gBAAgB,EAAGhC,KAAK,IAAK,GAAGA,KAAK,GAAI;YACzCkC,GAAG,EAAE,CAAE;YACPC,GAAG,EAAE;UAAG;YAAAjB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAELhE,OAAO,gBACNL,OAAA,CAACvB,gBAAgB;MAACqF,EAAE,EAAE;QAAEQ,EAAE,EAAE;MAAE;IAAE;MAAAJ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,GACjClE,IAAI,CAACkF,MAAM,GAAG,CAAC,gBACjBrF,OAAA,CAACzB,GAAG;MACFuF,EAAE,EAAE;QACFS,OAAO,EAAE,MAAM;QACfe,mBAAmB,EAAE,uCAAuC;QAC5DV,GAAG,EAAE,CAAC;QACNN,EAAE,EAAE;MACN,CAAE;MAAAN,QAAA,EAED7D,IAAI,CAACqC,GAAG,CAAEiB,GAAG;QAAA,IAAA8B,UAAA,EAAAC,YAAA;QAAA,oBACZxF,OAAA,CAACtB,IAAI;UAEHoF,EAAE,EAAE;YACF2B,MAAM,EAAE,gBAAgB;YACxBC,YAAY,EAAE,KAAK;YACnBC,UAAU,EAAE,qBAAqB;YACjC,SAAS,EAAE;cAAEC,SAAS,EAAE;YAAc;UACxC,CAAE;UAAA5B,QAAA,gBAEFhE,OAAA,CAACrB,SAAS;YACRkH,SAAS,EAAC,KAAK;YACfC,MAAM,EAAC,KAAK;YACZC,KAAK,EAAEtC,GAAG,CAACsC,KAAM;YACjBC,GAAG,EAAEvC,GAAG,CAACwC;UAAQ;YAAA/B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAClB,CAAC,eACFrE,OAAA,CAACpB,WAAW;YAAAoF,QAAA,gBACVhE,OAAA,CAACxB,UAAU;cAACyF,OAAO,EAAC,IAAI;cAACH,EAAE,EAAE;gBAAEoC,UAAU,EAAE;cAAO,CAAE;cAAAlC,QAAA,EACjDP,GAAG,CAACwC;YAAO;cAAA/B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACF,CAAC,eACbrE,OAAA,CAACxB,UAAU;cAACyF,OAAO,EAAC,OAAO;cAACkC,KAAK,EAAC,eAAe;cAAAnC,QAAA,EAC9CP,GAAG,CAAC2C;YAAW;cAAAlC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC,eACbrE,OAAA,CAACxB,UAAU;cACTyF,OAAO,EAAC,OAAO;cACfiC,UAAU,EAAC,MAAM;cACjBpC,EAAE,EAAE;gBAAES,OAAO,EAAE,MAAM;gBAAE8B,UAAU,EAAE;cAAS,CAAE;cAAArC,QAAA,GAE7CP,GAAG,CAAC6C,KAAK,eACVtG,OAAA;gBACEuG,GAAG,EAAE3G,OAAQ;gBACboG,GAAG,EAAC,SAAS;gBACbQ,KAAK,EAAE;kBAAE/B,KAAK,EAAE,EAAE;kBAAEqB,MAAM,EAAE;gBAAG;cAAE;gBAAA5B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACQ,CAAC,eACbrE,OAAA,CAACxB,UAAU;cAACyF,OAAO,EAAC,OAAO;cAAAD,QAAA,GAAC,SACnB,GAAAuB,UAAA,GAAC9B,GAAG,CAACG,KAAK,cAAA2B,UAAA,uBAATA,UAAA,CAAW1B,QAAQ;YAAA;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjB,CAAC,eACbrE,OAAA,CAACxB,UAAU;cAACyF,OAAO,EAAC,OAAO;cAAAD,QAAA,GAAC,WACjB,GAAAwB,YAAA,GAAC/B,GAAG,CAACgD,OAAO,cAAAjB,YAAA,uBAAXA,YAAA,CAAa3B,QAAQ;YAAA;cAAAK,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrB,CAAC,eACbrE,OAAA,CAACxB,UAAU;cAACyF,OAAO,EAAC,OAAO;cAAAD,QAAA,GAAC,WAAS,EAACP,GAAG,CAACiD,OAAO,EAAC,GAAC;YAAA;cAAAxC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eAEhErE,OAAA,CAACzB,GAAG;cACFuF,EAAE,EAAE;gBACFQ,EAAE,EAAE,CAAC;gBACLC,OAAO,EAAE,MAAM;gBACfC,cAAc,EAAE;cAClB,CAAE;cAAAR,QAAA,gBAEFhE,OAAA,CAACb,UAAU;gBACTwH,OAAO,EAAEA,CAAA,KAAMzD,UAAU,CAACO,GAAG,CAACf,GAAG,CAAE;gBACnCoB,EAAE,EAAE;kBACFqC,KAAK,EAAErF,SAAS,CAACsC,QAAQ,CAACK,GAAG,CAACf,GAAG,CAAC,GAAG,KAAK,GAAG;gBAC/C,CAAE;gBAAAsB,QAAA,EAEDlD,SAAS,CAACsC,QAAQ,CAACK,GAAG,CAACf,GAAG,CAAC,gBAC1B1C,OAAA,CAACP,YAAY;kBAAAyE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,gBAEhBrE,OAAA,CAACN,kBAAkB;kBAAAwE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cACtB;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACS,CAAC,eACbrE,OAAA,CAACd,MAAM;gBACLyH,OAAO,EAAEA,CAAA,KAAMnD,cAAc,CAACC,GAAG,CAAE;gBACnCQ,OAAO,EAAC,UAAU;gBAClBkC,KAAK,EAAC,SAAS;gBACfS,SAAS,eAAE5G,OAAA,CAACL,gBAAgB;kBAAAuE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAE;gBAAAL,QAAA,EACjC;cAED;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK,CAAC;QAAA,GArETZ,GAAG,CAACf,GAAG;UAAAwB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAsER,CAAC;MAAA,CACR;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,gBAENrE,OAAA,CAACxB,UAAU;MAACsF,EAAE,EAAE;QAAEQ,EAAE,EAAE;MAAE,CAAE;MAAAN,QAAA,EAAC;IAAc;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAY,CACtD,eAEDrE,OAAA,CAACZ,MAAM;MAACyH,IAAI,EAAE7F,UAAW;MAAC8F,OAAO,EAAEpD,YAAa;MAAAM,QAAA,gBAC9ChE,OAAA,CAACT,WAAW;QAAAyE,QAAA,EAAC;MAAO;QAAAE,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAa,CAAC,eAClCrE,OAAA,CAACV,aAAa;QAAA0E,QAAA,eACZhE,OAAA,CAACzB,GAAG;UAACuF,EAAE,EAAE;YAAES,OAAO,EAAE,MAAM;YAAEK,GAAG,EAAE;UAAE,CAAE;UAAAZ,QAAA,gBACnChE,OAAA;YACEuG,GAAG,EAAErF,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAE6E,KAAM;YACxBC,GAAG,EAAE9E,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAE+E,OAAQ;YAC1BO,KAAK,EAAE;cAAE/B,KAAK,EAAE,OAAO;cAAEqB,MAAM,EAAE,OAAO;cAAEiB,SAAS,EAAE;YAAQ;UAAE;YAAA7C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChE,CAAC,eACFrE,OAAA,CAACzB,GAAG;YAAAyF,QAAA,gBACFhE,OAAA,CAACxB,UAAU;cAACyF,OAAO,EAAC,IAAI;cAAAD,QAAA,EAAE9C,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAE+E;YAAO;cAAA/B,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAa,CAAC,eAC5DrE,OAAA,CAACxB,UAAU;cAACyF,OAAO,EAAC,OAAO;cAAAD,QAAA,EACxB9C,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEkF;YAAW;cAAAlC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACf,CAAC,eACbrE,OAAA,CAACR,OAAO;cAACsE,EAAE,EAAE;gBAAEkD,EAAE,EAAE;cAAE;YAAE;cAAA9C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eAC1BrE,OAAA,CAACxB,UAAU;cACTyF,OAAO,EAAC,OAAO;cACfH,EAAE,EAAE;gBAAES,OAAO,EAAE,MAAM;gBAAE8B,UAAU,EAAE;cAAS,CAAE;cAAArC,QAAA,gBAE9ChE,OAAA;gBAAAgE,QAAA,EAAQ;cAAM;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,KAAC,EAACnD,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEoF,KAAK,EAAE,GAAG,eAChDtG,OAAA;gBACEuG,GAAG,EAAE3G,OAAQ;gBACboG,GAAG,EAAC,SAAS;gBACbQ,KAAK,EAAE;kBAAE/B,KAAK,EAAE,EAAE;kBAAEqB,MAAM,EAAE;gBAAG;cAAE;gBAAA5B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAClC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACV,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACO,CAAC,eAChBrE,OAAA,CAACX,aAAa;QAAA2E,QAAA,gBACZhE,OAAA,CAACd,MAAM;UAACyH,OAAO,EAAEjD,YAAa;UAAAM,QAAA,EAAC;QAAM;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eAC9CrE,OAAA,CAACd,MAAM;UAACyH,OAAO,EAAEhD,SAAU;UAACwC,KAAK,EAAC,SAAS;UAAAnC,QAAA,EAAC;QAE5C;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACV,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV,CAAC;AAACnE,EAAA,CApWID,OAAO;AAAAgH,EAAA,GAAPhH,OAAO;AAsWb,eAAeA,OAAO;AAAC,IAAAgH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}